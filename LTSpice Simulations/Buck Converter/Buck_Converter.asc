Version 4
SHEET 1 5444 1436
WIRE -496 -160 -528 -160
WIRE -448 -160 -496 -160
WIRE -192 -160 -352 -160
WIRE -112 -160 -192 -160
WIRE -32 -160 -112 -160
WIRE 128 -160 48 -160
WIRE 320 -160 128 -160
WIRE 528 -160 320 -160
WIRE -944 -144 -992 -144
WIRE -896 -144 -944 -144
WIRE -752 -144 -800 -144
WIRE -720 -144 -752 -144
WIRE -992 -112 -992 -144
WIRE -800 -112 -800 -144
WIRE -448 -96 -448 -160
WIRE -352 -96 -352 -160
WIRE 528 -64 528 -160
WIRE -112 -48 -112 -160
WIRE 128 -48 128 -160
WIRE -432 0 -480 0
WIRE -368 0 -368 -48
WIRE -368 0 -432 0
WIRE -992 16 -992 -32
WIRE -800 16 -800 -32
WIRE -752 96 -784 96
WIRE -720 96 -752 96
WIRE -112 112 -112 16
WIRE 128 112 128 16
WIRE 528 112 528 16
WIRE -720 128 -720 96
WIRE -880 224 -912 224
WIRE -832 224 -880 224
WIRE -720 240 -720 208
WIRE -720 240 -768 240
WIRE -656 240 -720 240
WIRE -624 240 -656 240
WIRE -928 256 -1008 256
WIRE -832 256 -928 256
WIRE -1008 304 -1008 256
WIRE -1008 448 -1008 384
FLAG -928 256 MCU_PWM
FLAG -944 -144 Vin
FLAG -1008 448 0
FLAG -992 16 0
FLAG -112 112 0
FLAG -432 0 PWM
FLAG 320 -160 Vout2
FLAG -192 -160 Sw2
FLAG -496 -160 Vin
FLAG 128 112 0
FLAG 528 112 0
FLAG -656 240 PWM
FLAG -800 16 0
FLAG -752 96 Vin
FLAG -752 -144 3V3
FLAG -880 224 3V3
SYMBOL voltage -992 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -1008 288 R0
WINDOW 3 33 99 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 5 0 1n 1n {D*20u} 20u)
SYMATTR InstName V2
SYMBOL res -736 112 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL schottky -96 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind -48 -144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 47m
SYMBOL cap 112 -48 R0
SYMATTR InstName C2
SYMATTR Value 2m
SYMBOL res 512 -80 R0
SYMATTR InstName RLoad
SYMATTR Value 100
SYMBOL nmos -448 -48 R270
SYMATTR InstName M4
SYMATTR Value IRLHM630
SYMBOL AutoGenerated\\BSS138_ZTX -800 240 M0
SYMATTR InstName U2
SYMBOL voltage -800 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.3
TEXT -968 448 Left 2 !.tran 0.2
TEXT -240 -264 Left 2 ;Higher inductor value limits peak current output, peak\nvoltage output, and slows down system.
TEXT -968 416 Left 2 !.param D=0.1
TEXT -1024 -216 Left 2 ;PWM follows MCU input at Vin logic level
TEXT 640 -160 Left 2 ;Need to test it at various loads:\n- No load\n- 100 Ohm\n- 1kOhm\n- 10kOhm\n- 100kOhm
TEXT -656 128 Left 2 ;Pull up can't be too high because\ntau = R*C and takes too long for\nPWM peak to charge at low duty cycle.
TEXT 648 32 Left 2 ;They work, but PWM is dependent on the resistance.\nHigher the resistance, lower the duty cycle needed\nfor higher voltages. All resistances can output 1V - 10V however.\nThus, feedback circuit is mandatory.
TEXT 648 160 Left 2 ;Lower Duty Cycle Bound: 10%\nUpper Duty Cycle Bound: 90%
TEXT 160 48 Left 2 ;Higher capacitance increases\npeak current output, peak \nvoltage output, and slows\ndown system.
TEXT -176 -368 Left 5 ;Buck Converter
